<template>
  <div>
    <div v-pin:true.right.top="pinned" class="card">
      Lorem ipsum dolor sit amet consectetur
      <!-- 动态修改隐藏显示，绑定一个变量，就可以动态的修改了自定义指令的修饰符 -->
      <button @click="pinned = !pinned">📌|🦐</button>
    </div>
    
    <section>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maxime ipsa minima temporibus voluptatem neque ducimus autem voluptas commodi dolore provident illo sequi modi, aliquam, exercitationem ratione earum? Ab, ad accusamus ipsa quasi illo mollitia eum neque laboriosam. Labore aspernatur deserunt officiis id commodi ut libero tempore maxime dolores numquam est modi necessitatibus, atque voluptates mollitia maiores beatae aut delectus iure aliquam laboriosam sunt, vitae provident tenetur! Corrupti obcaecati doloribus mollitia ea possimus architecto officiis dolore veritatis eaque ducimus ex ipsam, ullam, similique nihil error vero magnam labore corporis nesciunt velit laudantium earum saepe quae! Obcaecati, aspernatur quasi unde aut harum, nostrum excepturi at exercitationem laboriosam cupiditate distinctio perspiciatis porro ipsam velit impedit soluta expedita magni quidem quia asperiores repudiandae? Quae accusantium sit dolores corporis reiciendis, voluptas est. Facilis libero quibusdam doloremque! Consequuntur, deleniti eum consectetur fugit error dolorem esse culpa velit, qui, illum amet dolore voluptas nam rem officiis? Quod quos aliquid veritatis. Sed unde totam ad veritatis saepe enim officia dolorum aliquam nobis nulla, impedit ducimus ullam voluptate reiciendis voluptatibus. Excepturi, laboriosam veniam debitis deleniti illo beatae vero ex odio praesentium inventore, aliquid unde tenetur ipsam fugiat nisi ut expedita dolore sed delectus accusantium possimus aliquam ratione laborum! Magnam, illum sint! Quo est, natus omnis ratione, amet veritatis nostrum tempore officiis optio enim id consequatur? Sed, soluta molestiae eius illum earum ratione voluptas doloribus aliquam. Id aliquam dolorum libero assumenda, omnis rem tenetur iusto, fugit quisquam eos corporis quaerat, nesciunt enim harum optio distinctio architecto. Tempora odio id atque dolore voluptatibus rerum omnis fuga ipsum, unde dignissimos ratione sunt laborum laudantium accusamus distinctio! Vero, quisquam maiores cupiditate doloremque deserunt eos assumenda soluta eum explicabo consectetur sit quasi expedita mollitia. At in ut nihil minus ad voluptas! Delectus sed officiis quidem vel. Quidem minus quis enim minima ullam, corporis impedit cum adipisci et a est eius, fugit fugiat voluptatibus non modi quia, vitae explicabo atque tenetur ab earum exercitationem? Quibusdam nemo dignissimos ipsam at nesciunt architecto minus cumque repellendus? Unde assumenda quo aut rem temporibus eum porro nemo facere in cum esse consequuntur maiores aliquid eaque veniam voluptatem suscipit dolor itaque, voluptate officia nobis! Optio, ducimus ullam. Deserunt ratione numquam est iure doloremque vel omnis nesciunt aliquid sequi cum tempore, fuga, maiores excepturi, nihil hic illum ullam amet quis voluptate! Optio ipsa neque, aliquid eos ducimus aspernatur debitis mollitia. Vero nobis repudiandae laborum est quia, optio, quibusdam tempora sapiente sed nisi ut aspernatur magnam dolorem a officia modi, dolore harum fugit? Vero quibusdam eligendi possimus expedita consequatur aut officiis iure quos explicabo, minima quod temporibus perferendis quidem commodi nesciunt cupiditate unde nemo repellendus repudiandae, ipsum blanditiis veniam? Consequuntur, eum ex, adipisci repudiandae dicta tempore fugiat magni voluptatibus perspiciatis fuga repellat, aperiam at quam sint accusantium suscipit. Alias id quia optio perspiciatis beatae ratione! Amet commodi, excepturi ratione temporibus fugiat, perspiciatis animi laudantium iusto quae eius dolor iure sequi, nisi accusamus rerum minima aliquam? Impedit laboriosam corrupti doloremque unde tenetur quidem quisquam consequuntur explicabo dicta eos? Ipsam impedit maiores facere dicta quam repudiandae quisquam ex veniam! Sed laudantium magni delectus at ipsam sit architecto! Harum modi, earum voluptatibus necessitatibus a tenetur qui natus. Mollitia minus voluptatibus aspernatur, temporibus perspiciatis voluptates fugit praesentium voluptatem non accusamus velit nemo repellat incidunt debitis sunt recusandae? Sit illo officia iusto odit quae porro, dicta necessitatibus dolorum esse vel! Nesciunt magnam modi illo delectus exercitationem laborum ipsam consequatur distinctio sapiente itaque, harum alias explicabo fuga porro ea doloremque ullam non quaerat pariatur eaque earum vitae voluptates totam. Obcaecati eius cupiditate, harum veniam excepturi est, ipsam earum ex, doloremque numquam autem laudantium libero soluta neque. Repellat magni ducimus voluptas distinctio optio vitae quam delectus quibusdam repellendus officiis? Voluptas temporibus, cupiditate consectetur magnam voluptates incidunt soluta expedita possimus unde ex fugit aliquid nobis autem aspernatur in non accusantium eligendi dignissimos! Consequatur nostrum eius et labore voluptas reprehenderit tempore, repellat maiores blanditiis error neque nesciunt, adipisci officia provident at eum optio possimus sed ullam, deserunt fuga ducimus quia expedita dignissimos. Autem ea possimus perferendis ad quos nisi, rerum, voluptatum enim labore modi velit dolore. Incidunt, magni laborum rerum non esse harum. Eum neque ab velit numquam, sit sequi assumenda quam molestias perferendis at saepe ea harum magnam voluptatem qui possimus incidunt quod aperiam corrupti adipisci nemo repellat! Quia inventore reiciendis pariatur, tempore quae magni dolores similique doloribus aliquam, rem, labore quod quibusdam odit dolor illo omnis dolorum? Est iusto adipisci natus maiores enim in cum mollitia, sint id velit odio ad fugit? Consequuntur, deserunt fugit, dolorem consequatur excepturi ea omnis cumque, illum maiores ratione vitae veniam expedita? Asperiores reiciendis cupiditate ipsum. Error voluptatibus itaque sed, accusamus vel tenetur accusantium reprehenderit harum repellat voluptate eaque id neque facilis nobis iure eos totam! Blanditiis aperiam repellat necessitatibus praesentium, impedit iste sequi ipsam dolores minus fugit aspernatur labore cumque nemo quaerat tempore expedita quibusdam consequuntur nobis facilis adipisci laborum. Laudantium fuga odio aperiam. Nihil hic assumenda quibusdam fuga officia aspernatur eveniet vero tempore, quod nulla possimus, amet, dolor aliquam ex rerum quos non molestias. Perspiciatis et eum ipsum labore. Dolor, neque vitae iusto repellat in incidunt illo, veritatis ipsa laborum aliquid culpa quod. Magnam, a tempora. Dolor repellendus hic praesentium itaque vero nesciunt eaque, culpa quos eveniet recusandae veritatis facere assumenda dignissimos necessitatibus error ex nisi fuga laboriosam maxime cupiditate eius nulla voluptate sed? Totam accusantium quia consequuntur sapiente suscipit rerum unde? Voluptatibus nobis placeat culpa iusto. Numquam laudantium hic, quidem earum consequuntur inventore rem sit repellendus autem nobis provident enim blanditiis ullam doloribus cum minus! Itaque vero voluptates nobis. Nihil magnam ipsum laboriosam dolore repudiandae, a tenetur. Quaerat aperiam dolores aut rem, eius natus impedit ducimus officiis non tempore ab et unde nisi odit quidem vitae maiores perspiciatis assumenda illum expedita sunt deserunt iure eum amet. Necessitatibus ratione voluptate dolore praesentium deserunt vitae quasi, animi sunt. Dolorum ipsam eos delectus molestias, modi beatae recusandae atque minima. Ad similique ut et id impedit minima eos beatae, animi aperiam alias! Voluptas temporibus in, commodi reprehenderit nobis harum aliquam asperiores suscipit a architecto nemo?
    </section>
  </div>
</template>

<script>
// 指令，默认 函数形式，相当于 bind + update，写成对象，都要写
Vue.directive('split', function(el, bindings, vnode) {
  // vnode.context 上下文
  const ctx = vnode.context
  ctx[bindings.expression] = el.value.slice(0, 3)
  console.log('le',el, bindings, vnode)
})

// 图钉效果📌, vue 指令后面放的是变量
Vue.directive('pin', {
  bind(el, binding, vnode) {
    console.log('pin', el, binding)
    let {value, modifiers, arg} = binding
    if (!value) return el.style.position = 'static';
    
    el.style.position = 'fixed';
    // 指令修饰符
    for(let key in modifiers) {
      if (key) {
        console.log(key, modifiers[key])
        el.style[key] = '32px';
      }
    }
    
    if (arg) {
      el.style.backgroundColor = '#f90'
    }
  },
  update(el, binding, vnode) {
    el.style[binding.arg] = binding.value +'px';
  }
})

export default {
  data () {
    return {
      pinned: true
    }
  }
}
</script>

<style>
  .card {
    padding: 15px;
    background-color: #ccc;
  }
</style>
